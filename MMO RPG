import random
import math
from enum import Enum

class Rarity(Enum):
    COMMON = 1
    RARE = 2
    EPIC = 3
    LEGENDARY = 4
    DIVINE = 5

class PlayerClass(Enum):
    SAMURAI = "samurai"
    MAGE = "mage"
    NECROMANCER = "necromancer"
    ELF = "elf"

class PhysicsBody:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.velocity_x = 0
        self.velocity_y = 0
        self.mass = 1.0
        
    def apply_force(self, force_x, force_y):
        self.velocity_x += force_x / self.mass
        self.velocity_y += force_y / self.mass
        
    def update(self):
        self.x += self.velocity_x
        self.y += self.velocity_y
        self.velocity_x *= 0.9
        self.velocity_y *= 0.9

class Weapon:
    def __init__(self, name, rarity, damage, is_creator=False):
        self.name = name
        self.rarity = rarity
        self.damage = damage
        self.durability = float('inf') if is_creator else 100
        
    def take_damage(self, amount):
        if self.durability != float('inf'):
            self.durability -= amount
        return self.durability > 0

class Armor:
    def __init__(self, name, rarity, defense, is_creator=False):
        self.name = name
        self.rarity = rarity
        self.defense = defense
        self.durability = float('inf') if is_creator else 100
        self.is_destroyed = False
        
    def take_hit(self, damage):
        if self.is_destroyed:
            return damage
            
        actual_damage = max(1, damage - self.defense)
        
        if self.durability != float('inf'):
            self.durability -= actual_damage * 0.1
            
            if self.durability <= 0:
                self.is_destroyed = True
                print(f"ðŸ’¥ {self.name} Ð±Ñ‹Ð»Ð° ÑƒÐ½Ð¸Ñ‡Ñ‚Ð¾Ð¶ÐµÐ½Ð°!")
                
        return actual_damage

class Player(PhysicsBody):
    def __init__(self, name, player_class, is_creator=False):
        super().__init__(random.uniform(0, 100), random.uniform(0, 100))
        self.name = name
        self.player_class = player_class
        self.is_creator = is_creator
        
        # Ð¥ÐÐ ÐÐšÐ¢Ð•Ð Ð˜Ð¡Ð¢Ð˜ÐšÐ˜ (Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ vs ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ð¸Ð³Ñ€Ð¾Ðº)
        if is_creator:
            self.level = 1000
            self.health = 1000000
            self.max_health = 1000000
            self.mana = 500000
            self.max_mana = 500000
            self.money = 1000000000
            self.diamonds = 10000000
        else:
            self.level = random.randint(1, 50)
            self.health = 100 + (self.level * 10)
            self.max_health = self.health
            self.mana = 100 + (self.level * 5)
            self.max_mana = self.mana
            self.money = random.randint(100, 5000)
            self.diamonds = random.randint(10, 100)
        
        # Ð¡ÐÐÐ Ð¯Ð–Ð•ÐÐ˜Ð•
        if is_creator:
            self.weapon = Weapon("âš¡ ÐšÐ›Ð˜ÐÐžÐš Ð’Ð¡Ð•Ð’Ð«Ð¨ÐÐ•Ð“Ðž", Rarity.DIVINE, 999999, True)
            self.armor = Armor("âœ¨ Ð‘Ð ÐžÐÐ¯ ÐÐ‘Ð¡ÐžÐ›Ð®Ð¢Ð", Rarity.DIVINE, 999999, True)
        else:
            weapon_rarity = random.choice(list(Rarity)[:3])  # COMMON, RARE, EPIC
            armor_rarity = random.choice(list(Rarity)[:3])
            self.weapon = Weapon(f"ÐžÑ€ÑƒÐ¶Ð¸Ðµ {self.player_class.value}", weapon_rarity, 10 + (self.level * 2))
            self.armor = Armor(f"Ð‘Ñ€Ð¾Ð½Ñ {self.player_class.value}", armor_rarity, 5 + self.level)
        
        # Ð’ÐÐ•Ð¨ÐÐžÐ¡Ð¢Ð¬
        if is_creator:
            self.appearance = {
                "hair_style": "godlike",
                "hair_color": "golden", 
                "skin_color": "divine",
                "height": 2.5,
                "armor_style": "creator_god",
                "aura": "golden_light"
            }
        else:
            self.appearance = {
                "hair_style": random.choice(["short", "long", "medium"]),
                "hair_color": random.choice(["black", "brown", "blonde"]), 
                "skin_color": "normal",
                "height": round(random.uniform(1.6, 1.9), 1),
                "armor_style": "basic",
                "aura": "none"
            }
    
    def attack(self, target):
        if self.weapon.durability <= 0:
            print("âš ï¸ ÐžÑ€ÑƒÐ¶Ð¸Ðµ ÑÐ»Ð¾Ð¼Ð°Ð»Ð¾ÑÑŒ!")
            return False
            
        # Ð ÐÐ¡Ð§Ð•Ð¢ Ð£Ð ÐžÐÐ
        if self.is_creator:
            base_damage = self.weapon.damage * 5  # Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð²ÑÐµÐ³Ð´Ð° ÐºÑ€Ð¸Ñ‚ÑƒÐµÑ‚
            print("ðŸ’¥ Ð‘ÐžÐ–Ð•Ð¡Ð¢Ð’Ð•ÐÐÐ«Ð™ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™ Ð£Ð”ÐÐ !")
        else:
            base_damage = self.weapon.damage * (self.level / 100)
            crit_chance = 0.1 + (self.level * 0.001)
            if random.random() < crit_chance:
                base_damage *= 2
                print("ðŸ’¥ ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑƒÐ´Ð°Ñ€!")
        
        # Ð¤Ð˜Ð—Ð˜ÐšÐ ÐÐ¢ÐÐšÐ˜
        if self.is_creator:
            force_x = random.uniform(-20, 20)
            force_y = random.uniform(-20, 20)
            self.apply_force(force_x * 0.1, force_y * 0.1)
            target.apply_force(-force_x * 10, -force_y * 10)
        else:
            force_x = random.uniform(-5, 5)
            force_y = random.uniform(-5, 5)
            self.apply_force(force_x, force_y)
            target.apply_force(-force_x * 2, -force_y * 2)
        
        actual_damage = target.take_damage(base_damage)
        
        # Ð˜Ð—ÐÐžÐ¡ ÐžÐ Ð£Ð–Ð˜Ð¯ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²)
        if not self.is_creator:
            self.weapon.take_damage(1)
        
        print(f"âš”ï¸ {self.name} Ð°Ñ‚Ð°ÐºÑƒÐµÑ‚ {target.name} Ð¸ Ð½Ð°Ð½Ð¾ÑÐ¸Ñ‚ {actual_damage:.1f} ÑƒÑ€Ð¾Ð½Ð°!")
        return True
    
    def take_damage(self, damage):
        # Ð¡ÐžÐ—Ð”ÐÐ¢Ð•Ð›Ð¬ ÐÐ•Ð£Ð¯Ð—Ð’Ð˜Ðœ
        if self.is_creator:
            actual_damage = damage * 0.01
        else:
            actual_damage = self.armor.take_hit(damage)
            
        self.health -= actual_damage
        
        # Ð¤Ð˜Ð—Ð˜ÐšÐ ÐŸÐžÐ›Ð£Ð§Ð•ÐÐ˜Ð¯ Ð£Ð ÐžÐÐ
        if not self.is_creator and actual_damage > 50:
            knockback_x = random.uniform(-10, -5)
            knockback_y = random.uniform(-2, 2)
            self.apply_force(knockback_x, knockback_y)
        
        if self.health <= 0:
            print(f"ðŸ’€ {self.name} Ð¿Ð°Ð» Ð² Ð±Ð¾ÑŽ!")
            
        return actual_damage
    
    def level_up(self):
        if self.level < 1000:
            self.level += 1
            self.max_health += 20
            self.health = self.max_health
            self.max_mana += 10
            self.mana = self.max_mana
            print(f"ðŸŽ‰ {self.name} Ð´Ð¾ÑÑ‚Ð¸Ð³ ÑƒÑ€Ð¾Ð²Ð½Ñ {self.level}!")
    
    def use_god_power(self):
        if self.is_creator:
            print(f"ðŸŒŸ {self.name} Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÑÐ¸Ð»Ñƒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ!")
            self.health = self.max_health
            self.mana = self.max_mana
            print("â¤ï¸ Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð¼Ð°Ð½Ð° Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ð´Ð¾ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼Ð°!")
        else:
            print("âŒ Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ñƒ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ!")
    
    def change_appearance(self, **kwargs):
        for key, value in kwargs.items():
            if key in self.appearance:
                self.appearance[key] = value
        print(f"ðŸŽ¨ {self.name} Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð» Ð²Ð½ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ: {self.appearance}")
    
    def display_status(self):
        print(f"\n{'ðŸŒŸ' if self.is_creator else 'ðŸ‘¤'} {self.name} {'ðŸŒŸ' if self.is_creator else ''}")
        print(f"âš”ï¸ ÐšÐ»Ð°ÑÑ: {self.player_class.value}")
        print(f"ðŸ“Š Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: {self.level}")
        print(f"â¤ï¸ Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ: {self.health:.0f}/{self.max_health}")
        print(f"ðŸ”® ÐœÐ°Ð½Ð°: {self.mana:.0f}")
        print(f"ðŸ’° Ð”ÐµÐ½ÑŒÐ³Ð¸: {self.money if not self.is_creator else 'âˆž'}")
        print(f"ðŸ’Ž ÐÐ»Ð¼Ð°Ð·Ñ‹: {self.diamonds if not self.is_creator else 'âˆž'}")
        print(f"âš”ï¸ ÐžÑ€ÑƒÐ¶Ð¸Ðµ: {self.weapon.name} ({self.weapon.rarity.name})")
        print(f"ðŸ›¡ï¸ Ð‘Ñ€Ð¾Ð½Ñ: {self.armor.name} ({self.armor.rarity.name})")
        print(f"ðŸ“ ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ: ({self.x:.1f}, {self.y:.1f})")

class GameWorld:
    def __init__(self):
        self.players = []
        self.creator = None
        
    def create_creator(self):
        self.creator = Player("Ð’Ð›ÐÐ¡Ð¢Ð•Ð›Ð˜Ð", PlayerClass.SAMURAI, is_creator=True)
        self.players.append(self.creator)
        print("ðŸŒŸ Ð¡ÐžÐ—Ð”ÐÐ¢Ð•Ð›Ð¬ ÐŸÐ Ð˜Ð‘Ð«Ð› Ð’ ÐœÐ˜Ð !")
    
    def create_normal_players(self, count=4):
        classes = list(PlayerClass)
        names = ["ÐÑ€Ð°Ð³Ð¾Ñ€Ð½", "Ð“ÑÐ½Ð´Ð°Ð»ÑŒÑ„", "Ð›ÐµÐ³Ð¾Ð»Ð°Ñ", "Ð¡Ð°Ñ€ÑƒÐ¼Ð°Ð½", "Ð¤Ñ€Ð¾Ð´Ð¾", "Ð“Ð¸Ð¼Ð»Ð¸"]
        
        for i in range(count):
            player_class = random.choice(classes)
            name = random.choice(names) + str(random.randint(1, 100))
            player = Player(name, player_class, is_creator=False)
            self.players.append(player)
        
        print(f"ðŸ‘¥ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾ {count} Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²")
    
    def battle_demo(self):
        print("\nâš”ï¸ Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜Ð¯ Ð‘ÐžÐ¯: Ð¡ÐžÐ—Ð”ÐÐ¢Ð•Ð›Ð¬ vs Ð˜Ð“Ð ÐžÐšÐ˜")
        
        normal_players = [p for p in self.players if not p.is_creator]
        
        for i, enemy in enumerate(normal_players[:2]):  # Ð‘Ð¾Ð¹ Ñ Ð¿ÐµÑ€Ð²Ñ‹Ð¼Ð¸ Ð´Ð²ÑƒÐ¼Ñ Ð¸Ð³Ñ€Ð¾ÐºÐ°Ð¼Ð¸
            print(f"\n--- Ð‘Ð¾Ð¹ {i+1}: {self.creator.name} vs {enemy.name} ---")
            
            # ÐŸÐ¾ÐºÐ°Ð· Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹
            print(f"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ: ({self.creator.x:.1f}, {self.creator.y:.1f})")
            print(f"Ð’Ñ€Ð°Ð³: ({enemy.x:.1f}, {enemy.y:.1f})")
            
            # ÐÑ‚Ð°ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ
            self.creator.attack(enemy)
            
            # ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð¸Ð·Ð¸ÐºÐ¸
            self.creator.update()
            enemy.update()
            
            print(f"ÐŸÐ¾ÑÐ»Ðµ Ð°Ñ‚Ð°ÐºÐ¸ - Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ: ({self.creator.x:.1f}, {self.creator.y:.1f})")
            print(f"ÐŸÐ¾ÑÐ»Ðµ Ð°Ñ‚Ð°ÐºÐ¸ - Ð’Ñ€Ð°Ð³: ({enemy.x:.1f}, {enemy.y:.1f})")
            
            if enemy.health <= 0:
                print(f"ðŸŽ¯ {enemy.name} Ð¿Ð¾Ð²ÐµÑ€Ð¶ÐµÐ½ Ð±Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ ÑÐ¸Ð»Ð¾Ð¹!")
    
    def show_world_status(self):
        print(f"\nðŸŒ Ð¡ÐžÐ¡Ð¢ÐžÐ¯ÐÐ˜Ð• ÐœÐ˜Ð Ð")
        print(f"Ð’ÑÐµÐ³Ð¾ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²: {len(self.players)}")
        print(f"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ: {self.creator.name}")
        
        normal_players = [p for p in self.players if not p.is_creator]
        print(f"ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ðµ Ð¸Ð³Ñ€Ð¾ÐºÐ¸: {len(normal_players)}")
        
        # Ð¡Ñ‚Ð°Ñ‚ÑƒÑÑ‹ Ð²ÑÐµÑ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
        for player in self.players:
            player.display_status()

# Ð—ÐÐŸÐ£Ð¡Ðš Ð˜Ð“Ð Ð«
def main():
    print("ðŸŽ® Ð—ÐÐŸÐ£Ð¡Ðš MMO RPG - ÐœÐ˜Ð  Ð¡ÐžÐ—Ð”ÐÐ¢Ð•Ð›Ð¯ Ð˜ Ð¡ÐœÐ•Ð Ð¢ÐÐ«Ð¥")
    
    # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð¸Ñ€Ð°
    world = GameWorld()
    
    # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ (Ð¢Ð•Ð‘Ð¯)
    world.create_creator()
    
    # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
    world.create_normal_players(4)
    
    # Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð±Ð¸Ñ‚Ð²Ñ‹
    world.battle_demo()
    
    # ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ Ð²ÑÐµÑ…
    world.show_world_status()
    
    # Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÐµÐ¹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ
    print(f"\nðŸŒŸ Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜Ð¯ Ð¡Ð˜Ð› Ð¡ÐžÐ—Ð”ÐÐ¢Ð•Ð›Ð¯")
    world.creator.use_god_power()
    world.creator.change_appearance(
        hair_style="cosmic",
        hair_color="rainbow", 
        aura="supernova"
    )
    
    print(f"\nðŸŽ‰ ÐœÐ˜Ð  Ð“ÐžÐ¢ÐžÐ’! Ð¢Ñ‹ - Ð’Ð›ÐÐ¡Ð¢Ð•Ð›Ð˜Ð ÑÑ‚Ð¾Ð³Ð¾ Ð¼Ð¸Ñ€Ð°!")

if __name__ == "__main__":
    main()
